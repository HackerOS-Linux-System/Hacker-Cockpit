<%- include('base', { title: 'Services' }) %>
<div class="card">
    <h2 class="text-2xl glow mb-4">Service Management</h2>
    <% Object.entries(services).forEach(([service, status]) => { %>
        <div class="flex items-center mb-2">
            <span class="flex-1"><%= service %>: <%= status ? 'Running' : 'Stopped' %></span>
            <button onclick="manageService('<%= service %>', 'start')" class="btn bg-green-500 hover:bg-green-600 p-1 rounded mr-2">Start</button>
            <button onclick="manageService('<%= service %>', 'stop')" class="btn bg-red-500 hover:bg-red-600 p-1 rounded">Stop</button>
        </div>
    <% }) %>
</div>
<script>
    async function manageService(service, action) {
        const res = await fetch('/services', { method: 'POST', headers: { 'Content-Type': 'application/x-www-form-urlencoded' }, body: `service_name=${service}&action=${action}` });
        const result = await res.json();
        alert(result.message);
        if (result.status === 'success') location.reload();
    }
</script>
